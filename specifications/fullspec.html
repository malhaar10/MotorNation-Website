<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9276332511991978"
        crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MotorNation</title>
    <link rel="icon" type="image/png" href="/assets/miniLogo.avif">
    <link rel="stylesheet" href="../page_header.css">
    <link rel="stylesheet" href="../specifications/specs.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <script src="../search-functionality.js"></script>
</head>

<body>
    <section class="header">
        <div class="logo-container">
            <a href="../index.html"><img src="../assets/MotorNation.avif" alt="MotorNation Logo"></a>
        </div>
        <nav id="navbar">
            <i class="fa fa-bars" onclick="showMenu()"></i>
            <div class="nav-links" id="navLinks">
                <i class="fa fa-times close-btn" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="../index.html">HOME</a></li>
                    <li><a href="../news-template/news-home.html">NEWS</a></li>
                    <li><a href="../article-page/article-home.html">ARTICLES</a></li>
                    <li><a href="../electric/electric.html">ELECTRIC</a></li>
                    <li><a href="../videos/video.html">VIDEOS</a></li>
                    <li class="search-bar-item">
                        <div class="nav-search-container">
                            <input type="text" id="nav-search-input" placeholder="Search..." class="nav-search-input">
                            <button onclick="performSearch()" class="nav-search-btn">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
    </section>

    <!-- Vehicle Specifications Display Section -->
    <section class="specs-display-section">
        <div class="specs-container">
            <div class="vehicle-card">
                <div class="vehicle-header">
                    <div class="vehicle-image">
                        <img src="" alt="Vehicle Image" id="vehicle-image">
                    </div>
                    <div class="vehicle-basic-info">
                        <h2 id="vehicle-name">Vehicle Name</h2>
                        <p class="vehicle-price" id="vehicle-price">$0</p>
                    </div>
                </div>

                <div class="vehicle-specs">
                    <h3>Technical Specifications</h3>
                    <div class="specs-grid">
                        <div class="spec-item">
                            <i class="fa fa-tachometer"></i>
                            <div class="spec-content">
                                <span class="spec-label">Horsepower</span>
                                <span class="spec-value" id="horsepower">-- HP</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-cog"></i>
                            <div class="spec-content">
                                <span class="spec-label">Torque</span>
                                <span class="spec-value" id="torque">-- lb-ft</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-users"></i>
                            <div class="spec-content">
                                <span class="spec-label">Seating Capacity</span>
                                <span class="spec-value" id="seating">-- seats</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-tint"></i>
                            <div class="spec-content">
                                <span class="spec-label">Fuel Type</span>
                                <span class="spec-value" id="fuel-type">--</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-exchange"></i>
                            <div class="spec-content">
                                <span class="spec-label">Transmission</span>
                                <span class="spec-value" id="transmission">--</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-leaf"></i>
                            <div class="spec-content">
                                <span class="spec-label">Fuel Economy</span>
                                <span class="spec-value" id="fuel-economy">-- MPG</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-desktop"></i>
                            <div class="spec-content">
                                <span class="spec-label">Touchscreen Size</span>
                                <span class="spec-value" id="touchscreen">--</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-dashboard"></i>
                            <div class="spec-content">
                                <span class="spec-label">Driver Display</span>
                                <span class="spec-value" id="driver-display">--</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-video-camera"></i>
                            <div class="spec-content">
                                <span class="spec-label">Camera</span>
                                <span class="spec-value" id="camera">--</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-truck"></i>
                            <div class="spec-content">
                                <span class="spec-label">Towing Capacity</span>
                                <span class="spec-value" id="towing">--</span>
                            </div>
                        </div>

                        <div class="spec-item">
                            <i class="fa fa-cubes"></i>
                            <div class="spec-content">
                                <span class="spec-label">Payload</span>
                                <span class="spec-value" id="payload">--</span>
                            </div>
                        </div>
                    </div>

                    <!-- Safety Features Section -->
                    <div class="full-specs-section" id="safety-section" style="display: none;">
                        <h3>Safety Features</h3>
                        <div class="features-content" id="safety-features"></div>
                    </div>

                    <!-- Additional Features Section -->
                    <div class="full-specs-section" id="additional-section" style="display: none;">
                        <h3>Additional Features</h3>
                        <div class="features-content" id="additional-features"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="hr">
        <hr>
    </section>
    <section class="contact-card">
        <img src="../assets/MotorNation.avif" alt="MotorNation logo">
        <div class="social-icons">
            <a href="https://www.facebook.com/motornationofficial"><i class="fa fa-facebook"></i></a>
            <a href="https://x.com/MotorNation_?t=WVuJZhDNnad4yikXOYNUng&s=09"><i class="fa fa-twitter"></i></a>
            <a href="https://www.instagram.com/motornation_group?igsh=MWJjMGNma3AwMW45Ng=="><i
                    class="fa fa-instagram"></i></a>
            <a href="https://www.youtube.com/channel/UC9HmzxcrnW3CGZVf0iPK6Eg"><i class="fa fa-youtube"></i></a>
        </div>
        <div class="contact-links">
            <a href="../about_us/about_us.html">About us</a>
            <a href="../contact_us/contact_us.html">Contact us</a>
            <a href="../TnC/tnc.html">Terms & Conditions</a>
            <a href="../careers/careers.html">Careers</a>
        </div>
    </section>

    <script>
        // Function to perform navigation search
        function performSearch() {
            const searchQuery = document.getElementById('nav-search-input').value.trim();
            if (searchQuery) {
                // Redirect to search page with tag parameter (matches backend API)
                window.location.href = `../search.html?tag=${encodeURIComponent(searchQuery)}`;
            }
        }

        // API Configuration
        const API_BASE = 'https://motornation-336079007565.us-central1.run.app/api';
        const TEST_UUID = '2e2d9bf4-29d8-402c-aa0c-65d23f99f3a3'; // For testing only

        // Function to fetch and display specifications
        async function fetchAndDisplaySpecs() {
            const urlParams = new URLSearchParams(window.location.search);
            const id = urlParams.get('id');
            
            try {
                // Use provided ID or fallback to test UUID
                const specId = id || TEST_UUID;
                
                console.log('Loading specification by ID:', specId);
                const response = await fetch(`${API_BASE}/specs/${specId}`);
                
                if (!response.ok) {
                    throw new Error(`Failed to fetch specifications: ${response.status}`);
                }

                const spec = await response.json();
                
                if (!spec) {
                    console.warn('No specification data found');
                    displayError('Specification not found.');
                    return;
                }

                // Display the data
                displaySpecification(spec);

            } catch (error) {
                console.error('Failed to load specification data:', error);
                displayError('Failed to load vehicle specifications. Please try again later.');
            }
        }

        // Function to display specification data
        function displaySpecification(spec) {
            // Update page title for SEO (include trim if available)
            const trimForTitle = spec.trim_name ? ` ${spec.trim_name}` : '';
            const specTitle = `${spec.car_name} ${spec.model_year}${trimForTitle} Specifications - MotorNation`;
            document.title = specTitle;
            
            // Display vehicle image (use first photo from array)
            const vehicleImage = document.getElementById('vehicle-image');
            if (spec.photos && spec.photos.length > 0) {
                vehicleImage.src = spec.photos[0];
                const trimText = spec.trim_name ? ` ${spec.trim_name}` : '';
                vehicleImage.alt = `${spec.car_name} ${spec.model_year}${trimText}`;
            } else {
                vehicleImage.src = '../assets/coming-soon-banner.avif';
                vehicleImage.alt = 'Vehicle Image Not Available';
            }

            // Display vehicle name (car_name + model_year + trim_name)
            const vehicleName = document.getElementById('vehicle-name');
            const trimSuffix = spec.trim_name ? ` ${spec.trim_name}` : '';
            vehicleName.textContent = `${spec.car_name} ${spec.model_year || ''}${trimSuffix}`.trim();

            // Display price
            const vehiclePrice = document.getElementById('vehicle-price');
            vehiclePrice.textContent = spec.pricing || 'Price Not Available';

            // Display horsepower
            const horsepower = document.getElementById('horsepower');
            horsepower.textContent = spec.horsepower || 'N/A';

            // Display torque
            const torque = document.getElementById('torque');
            torque.textContent = spec.torque || 'N/A';

            // Display seating capacity
            const seating = document.getElementById('seating');
            seating.textContent = spec.seating_capacity || 'N/A';

            // Display fuel type (from database column 'fuel_type')
            const fuelType = document.getElementById('fuel-type');
            fuelType.textContent = spec.fuel_type || 'N/A';

            // Display transmission
            const transmission = document.getElementById('transmission');
            transmission.textContent = spec.transmission || 'N/A';

            // Display fuel economy
            const fuelEconomy = document.getElementById('fuel-economy');
            fuelEconomy.textContent = spec.fuel_economy || 'N/A';

            // Display touchscreen size
            const touchscreen = document.getElementById('touchscreen');
            touchscreen.textContent = spec.touch_screen_size || 'N/A';

            // Display driver display
            const driverDisplay = document.getElementById('driver-display');
            driverDisplay.textContent = spec.driver_display || 'N/A';

            // Display camera
            const camera = document.getElementById('camera');
            camera.textContent = spec.camera || 'N/A';

            // Display towing capacity
            const towing = document.getElementById('towing');
            towing.textContent = spec.towing || 'N/A';

            // Display payload
            const payload = document.getElementById('payload');
            payload.textContent = spec.payload || 'N/A';

            // Display safety features
            if (spec.safety_features) {
                const safetySection = document.getElementById('safety-section');
                const safetyContent = document.getElementById('safety-features');
                safetySection.style.display = 'block';
                
                if (Array.isArray(spec.safety_features)) {
                    safetyContent.innerHTML = '<ul class="features-list">' + 
                        spec.safety_features.map(feature => `<li>${feature}</li>`).join('') + 
                        '</ul>';
                } else if (typeof spec.safety_features === 'string') {
                    const featuresArray = spec.safety_features
                        .split(/[,\n]/)
                        .map(f => f.trim())
                        .filter(f => f.length > 0);
                    
                    if (featuresArray.length > 0) {
                        safetyContent.innerHTML = '<ul class="features-list">' + 
                            featuresArray.map(feature => `<li>${feature}</li>`).join('') + 
                            '</ul>';
                    } else {
                        safetyContent.innerHTML = '<p>' + spec.safety_features + '</p>';
                    }
                }
            }

            // Display additional features
            if (spec.additional_features) {
                const additionalSection = document.getElementById('additional-section');
                const additionalContent = document.getElementById('additional-features');
                additionalSection.style.display = 'block';
                
                if (Array.isArray(spec.additional_features)) {
                    additionalContent.innerHTML = '<ul class="features-list">' + 
                        spec.additional_features.map(feature => `<li>${feature}</li>`).join('') + 
                        '</ul>';
                } else if (typeof spec.additional_features === 'string') {
                    const featuresArray = spec.additional_features
                        .split(/[,\n]/)
                        .map(f => f.trim())
                        .filter(f => f.length > 0);
                    
                    if (featuresArray.length > 0) {
                        additionalContent.innerHTML = '<ul class="features-list">' + 
                            featuresArray.map(feature => `<li>${feature}</li>`).join('') + 
                            '</ul>';
                    } else {
                        additionalContent.innerHTML = '<p>' + spec.additional_features + '</p>';
                    }
                }
            }
        }

        // Function to display error message
        function displayError(message) {
            const vehicleName = document.getElementById('vehicle-name');
            vehicleName.textContent = 'Error Loading Specifications';
            vehicleName.style.color = '#ff6b6b';

            const vehiclePrice = document.getElementById('vehicle-price');
            vehiclePrice.textContent = message;
            vehiclePrice.style.fontSize = '16px';
        }

        // Load specifications when page loads
        document.addEventListener('DOMContentLoaded', () => {
            fetchAndDisplaySpecs();
        });
    </script>
</body>


</body>

</html>